(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5526],{18463:function(e,n,t){"use strict";var r=t(87462),s=t(45987),o=t(67294),c=(t(45697),t(86010)),l=t(79895),a=t(1591),i=o.forwardRef((function(e,n){var t=e.classes,a=e.className,i=e.raised,d=void 0!==i&&i,u=(0,s.Z)(e,["classes","className","raised"]);return o.createElement(l.Z,(0,r.Z)({className:(0,c.Z)(t.root,a),elevation:d?8:1,ref:n},u))}));n.Z=(0,a.Z)({root:{overflow:"hidden"}},{name:"MuiCard"})(i)},79912:function(e,n,t){"use strict";var r=t(87462),s=t(45987),o=t(67294),c=(t(45697),t(86010)),l=t(1591),a=o.forwardRef((function(e,n){var t=e.classes,l=e.className,a=e.component,i=void 0===a?"div":a,d=(0,s.Z)(e,["classes","className","component"]);return o.createElement(i,(0,r.Z)({className:(0,c.Z)(t.root,l),ref:n},d))}));n.Z=(0,l.Z)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(a)},65490:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/downloads",function(){return t(59770)}])},59770:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return C}});var r=t(47568),s=t(34051),o=t.n(s),c=t(85893),l=t(67294),a=t(41120),i=t(43832),d=t(41749),u=t(22318),h=t(18463),f=t(79912),x=t(8920),m=t(88222),p=t(41664),Z=t.n(p),j=t(21093),g=t(20715),v=t(26562),w=t(88867),y=(0,a.Z)((function(e){return{root:{marginTop:e.spacing(4)}}}));function C(){var e=(0,l.useState)(null),n=e[0],t=e[1],s=y(),a=(0,l.useCallback)((0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rest/downloads");case 2:return n=e.sent,e.t0=t,e.next=6,n.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)}))));return(0,l.useEffect)((function(){a()}),[]),(0,c.jsx)(i.Z,{maxWidth:"xl",className:s.root,children:(0,c.jsxs)(d.Z,{container:!0,spacing:3,children:[(0,c.jsx)(d.Z,{item:!0,xs:12,children:(0,c.jsx)(u.Z,{variant:"h1",children:"My Files"})}),n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d.Z,{item:!0,xs:12,children:(0,c.jsx)(h.Z,{variant:"outlined",children:(0,c.jsx)(f.Z,{children:0===n.in_progress.length&&0===n.queued.length&&0===n.completed.length?(0,c.jsxs)(u.Z,{variant:"body2",children:["The mock data files that you generate will appear here.",(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),"There are no files to download at the moment."]}):(0,c.jsx)(u.Z,{variant:"body2",children:"The mock data files that you have generated appear here."})})})}),n.in_progress.length>0&&(0,c.jsx)(k,{title:"In Progress",downloads:n.in_progress,refresh:a}),n.queued.length>0&&(0,c.jsx)(k,{title:"Queued",downloads:n.queued,refresh:a}),n.completed.length>0&&(0,c.jsx)(k,{title:n.in_progress.length>0||n.queued.length>0?"Completed":void 0,downloads:n.completed,refresh:a})]}):(0,c.jsx)(j.Z,{})]})})}function k(e){var n=e.title,t=e.downloads,r=e.refresh,s=(0,l.useContext)(w.Z).refresh,o=(0,l.useCallback)((function(){setTimeout(s,1e3)}),[s]),a=(0,x.Z)();return(0,c.jsx)(v.Z,{title:n,refresh:r,records:t,label:"File",apiPath:"downloads",newAs:"/downloads/new",newHref:"/downloads/[record_id]",columns:["File","# Rows","Generated"],style:{marginBottom:a.spacing(3)},row:function(e){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(m.Z,{children:[(0,c.jsx)("div",{children:e.success?(0,c.jsx)("a",{href:"/rest/downloads/".concat(e.id,"/download"),onClick:o,children:(0,c.jsx)(u.Z,{children:e.name})}):(0,c.jsx)(Z(),{as:"/downloads/".concat(e.id),href:"/downloads/[id]",children:(0,c.jsx)("a",{children:(0,c.jsx)(u.Z,{children:e.name})})})}),(0,c.jsx)(u.Z,{variant:"body2",style:{opacity:.6},gutterBottom:!0,children:e.columns.join(" | ")})]}),(0,c.jsx)(m.Z,{children:e.num_rows}),(0,c.jsx)(m.Z,{style:{whiteSpace:"nowrap"},children:(0,c.jsx)(g.Z,{children:e.created_at})})]})}})}},20715:function(e,n,t){"use strict";var r=t(85893),s=t(67294),o=t(23855),c=t(84380),l=t(42298),a=t(868);n.Z=s.memo((function(e){var n=e.children,t=(0,o.Z)(n),s=(0,c.Z)(t,new Date);return(0,r.jsx)(a.ZP,{title:(0,l.Z)(t,"PPPPpp"),children:(0,r.jsxs)("span",{children:[s," ago"]})})}))},21093:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(85893),s=t(95477);function o(){return(0,r.jsx)("div",{style:{height:"calc(100vh - 64px)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"absolute",top:64,left:0,right:0},children:(0,r.jsx)(s.Z,{})})}},26562:function(e,n,t){"use strict";t.d(n,{Z:function(){return B}});var r=t(47568),s=t(26042),o=t(69396),c=t(34051),l=t.n(c),a=t(85893),i=t(67294),d=t(82302),u=t(99613),h=t(88222),f=t(83750),x=t(57394),m=t(41120),p=t(59693),Z=t(41749),j=t(282),g=t(22318),v=t(868),w=t(75625),y=t(17812),C=t(18442),k=t(28428),b=t(41664),S=t.n(b),_=t(29815);var D=t(37839),N=t(52663),P=t(66856),T=t(29525),O=t(7212),E=t(66083),R=(0,m.Z)((function(e){return{danger:{backgroundColor:e.palette.error.main,color:"white","&:hover":{backgroundColor:(0,p._j)(e.palette.error.main,.1)}}}}));function A(e){var n=e.title,t=e.message,r=e.confirmText,s=e.denyText,o=e.onConfirm,c=e.onDeny,l=e.open,d=e.onClose,u=R(),h=(0,i.useCallback)((function(){d(),o&&o()}),[d,o]),f=(0,i.useCallback)((function(){d(),c&&c()}),[d,c]);return(0,a.jsx)("div",{children:(0,a.jsxs)(N.Z,{open:l,onClose:d,children:[(0,a.jsx)(E.Z,{children:n}),(0,a.jsx)(T.Z,{children:(0,a.jsx)(O.Z,{children:t})}),(0,a.jsxs)(P.Z,{children:[(0,a.jsx)(j.Z,{onClick:f,children:s}),(0,a.jsx)(j.Z,{className:u.danger,onClick:h,variant:"contained",autoFocus:!0,children:r})]})]})})}A.defaultProps={open:!1,denyText:"Cancel"};var F=A,q=t(88867),z=(0,m.Z)((function(e){return{checkCell:{padding:0,width:30},danger:{backgroundColor:e.palette.error.main,color:"white","&:hover":{backgroundColor:(0,p._j)(e.palette.error.main,.1)}}}}));function B(e){var n,t,c=e.title,m=e.records,p=e.refresh,b=e.apiPath,N=e.label,P=e.createLabel,T=e.newHref,O=e.newAs,E=e.columns,R=e.row,A=e.actions,B=e.style,H=z(),I=(0,i.useState)({confirmDestroySelectedOpen:!1,confirmDestroyOpen:!1}),M=I[0],L=I[1],U=(0,i.useContext)(q.Z),X=U.refresh,G=U.session,J=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(0,i.useState)((function(){return new Set(n)})),r=t[0],s=t[1],o=(0,i.useCallback)((function(n){n.target.checked?s(new Set(e)):s(new Set([]))}),[e]),c=(0,i.useCallback)((function(n){n.target.checked?s(new Set((0,_.Z)(r).concat([e[n.target.value]]))):(r.delete(e[n.target.value]),s(new Set(r)))}),[e,r]),l=(0,i.useMemo)((function(){return e.length===r.size}),[r]),a=(0,i.useCallback)((function(){s(new Set)}),[]);return{toggleAll:o,selection:r,setSelection:s,toggle:c,allSelected:l,clearSelection:a}}(m),Q=J.selection,W=J.toggle,K=J.toggleAll,V=J.allSelected,Y=J.clearSelection,$=(0,i.useCallback)((function(){L((function(e){return(0,o.Z)((0,s.Z)({},e),{confirmDestroySelectedOpen:!0})}))}),[Q]),ee=(0,i.useCallback)((0,r.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(Q).map((function(e){return e.id})),toast("".concat(N.charAt(0).toUpperCase()+N.slice(1)).concat(1!==n.length?"s":""," deleted.")),e.next=4,fetch("/rest/".concat(b,"/destroy_selected"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:n})});case 4:return e.next=6,p();case 6:X(),Y();case 8:case"end":return e.stop()}}),e)}))),[Q,N]),ne=(0,i.useCallback)((function(e){L({confirmDestroyOpen:!0,destroyRecord:e})}),[]),te=(0,i.useCallback)((0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toast("".concat(N," ").concat(M.destroyRecord.name," deleted")),e.next=3,fetch("/rest/".concat(b,"/").concat(M.destroyRecord.id),{method:"DELETE"});case 3:p(),X(),L((function(e){return(0,o.Z)((0,s.Z)({},e),{destroyRecord:null})}));case 6:case"end":return e.stop()}}),e)}))),[M]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F,{open:M.confirmDestroyOpen,onClose:function(){return L((function(e){return(0,o.Z)((0,s.Z)({},e),{confirmDestroyOpen:!1})}))},title:"Delete ".concat(N),message:'Are your sure your want to delete "'.concat(null===(n=M.destroyRecord)||void 0===n?void 0:n.name,'"?'),onConfirm:te,confirmText:'Delete "'.concat(null===(t=M.destroyRecord)||void 0===t?void 0:t.name,'"')}),(0,a.jsx)(F,{open:M.confirmDestroySelectedOpen,onClose:function(){return L((function(e){return(0,o.Z)((0,s.Z)({},e),{confirmDestroySelectedOpen:!1})}))},title:"Delete Selected",message:"Are your sure your want to delete the ".concat(Q.size," selected ").concat(N,"(s)?"),onConfirm:ee,confirmText:"Delete Selected"}),(null!=P||null==G.user)&&(0,a.jsxs)(Z.Z,{item:!0,xs:12,style:{display:"flex"},children:[G.user&&P&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S(),{href:T,as:O,passHref:!0,children:(0,a.jsx)(j.Z,{variant:"contained",color:"primary",children:P})}),(0,a.jsx)(D.Z,{spacing:1}),A&&A.map((function(e,n){return(0,a.jsxs)("div",{style:{display:"flex"},children:[e,(0,a.jsx)(D.Z,{spacing:1})]},n)}))]}),!G.user&&(0,a.jsx)(S(),{href:"/sign-up?afterSignIn=".concat(encodeURIComponent(O)),passHref:!0,children:(0,a.jsxs)(j.Z,{variant:"contained",color:"primary",children:["Sign up for a free account to ",P]})})]}),0===m.length?null:(0,a.jsxs)(Z.Z,{item:!0,xs:12,style:B,children:[c&&(0,a.jsx)(g.Z,{variant:"h2",gutterBottom:!0,children:c}),(0,a.jsxs)(d.Z,{size:"small",children:[(0,a.jsx)(f.Z,{children:(0,a.jsxs)(x.Z,{children:[(0,a.jsx)(h.Z,{className:H.checkCell,children:(0,a.jsx)(v.ZP,{title:"Select all Records",children:(0,a.jsx)(w.Z,{onChange:K,checked:V})})}),E.map((function(e){return(0,a.jsx)(h.Z,{children:e},e)})),(0,a.jsx)(h.Z,{style:{whiteSpace:"nowrap"},children:(0,a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:0===m.length?null:(0,a.jsx)(v.ZP,{title:"Delete Selected",children:(0,a.jsx)(y.Z,{disabled:0===Q.size,onClick:$,children:(0,a.jsx)(C.Z,{})})})})})]})}),(0,a.jsx)(u.Z,{children:m.map((function(e,n){return(0,a.jsxs)(x.Z,{children:[(0,a.jsx)(h.Z,{className:H.checkCell,children:(0,a.jsx)(w.Z,{checked:Q.has(e),onChange:W,value:n})}),R(e),(0,a.jsx)(h.Z,{children:(0,a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,a.jsx)(v.ZP,{title:"Delete ".concat(e.name),children:(0,a.jsx)(y.Z,{onClick:function(){return ne(e)},children:(0,a.jsx)(k.Z,{})})})})})]},e.id)}))})]})]})]})}}},function(e){e.O(0,[1151,6367,1816,9774,2888,179],(function(){return n=65490,e(e.s=n);var n}));var n=e.O();_N_E=n}]);