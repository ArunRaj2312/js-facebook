(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4878],{43489:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/schemas",function(){return t(77914)}])},77914:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return C}});var r=t(47568),c=t(26042),s=t(69396),o=t(34051),i=t.n(o),l=t(85893),a=t(67294),u=t(41120),d=t(43832),h=t(41749),f=t(22318),x=t(282),m=t(88222),p=t(41664),j=t.n(p),Z=t(21093),y=t(20715),g=t(26562),v=(0,u.Z)((function(e){return{root:{marginTop:e.spacing(4)},columns:(0,s.Z)((0,c.Z)({},e.typography.caption),{opacity:.8})}}));function C(){var e=(0,a.useState)(null),n=e[0],t=e[1],c=v(),s=(0,a.useCallback)((0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rest/schemas");case 2:return n=e.sent,e.t0=t,e.next=6,n.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)}))),[t]);return(0,a.useEffect)((function(){s()}),[]),(0,l.jsx)(d.Z,{maxWidth:"xl",className:c.root,children:(0,l.jsxs)(h.Z,{container:!0,spacing:3,children:[(0,l.jsx)(h.Z,{item:!0,xs:12,children:(0,l.jsx)(f.Z,{variant:"h1",children:"My Schemas"})}),n?(0,l.jsx)(g.Z,{refresh:s,records:n,label:"schema",createLabel:"Create a schema",apiPath:"schemas",newAs:"/schemas/new",newHref:"/schemas/new",columns:["Name","Last Modified"],actions:[(0,l.jsx)(j(),{href:"/schemas/import",children:(0,l.jsx)(x.Z,{variant:"outlined",children:"Restore from Backup..."})})],row:function(e){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(m.Z,{children:[(0,l.jsx)("div",{children:(0,l.jsx)(j(),{as:"/schemas/".concat(e.id),href:"/schemas/[id]",children:(0,l.jsx)("a",{children:(0,l.jsx)(f.Z,{children:e.name})})})}),(0,l.jsx)("div",{className:c.columns,children:e.columns.join(" | ")})]}),(0,l.jsx)(m.Z,{style:{whiteSpace:"nowrap"},children:(0,l.jsx)(y.Z,{children:e.updatedAt})})]})}}):(0,l.jsx)(Z.Z,{})]})})}},20715:function(e,n,t){"use strict";var r=t(85893),c=t(67294),s=t(23855),o=t(84380),i=t(42298),l=t(868);n.Z=c.memo((function(e){var n=e.children,t=(0,s.Z)(n),c=(0,o.Z)(t,new Date);return(0,r.jsx)(l.ZP,{title:(0,i.Z)(t,"PPPPpp"),children:(0,r.jsxs)("span",{children:[c," ago"]})})}))},21093:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(85893),c=t(95477);function s(){return(0,r.jsx)("div",{style:{height:"calc(100vh - 64px)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"absolute",top:64,left:0,right:0},children:(0,r.jsx)(c.Z,{})})}},26562:function(e,n,t){"use strict";t.d(n,{Z:function(){return L}});var r=t(47568),c=t(26042),s=t(69396),o=t(34051),i=t.n(o),l=t(85893),a=t(67294),u=t(82302),d=t(99613),h=t(88222),f=t(83750),x=t(57394),m=t(41120),p=t(59693),j=t(41749),Z=t(282),y=t(22318),g=t(868),v=t(75625),C=t(17812),w=t(18442),k=t(28428),S=t(41664),b=t.n(S),D=t(29815);var _=t(37839),P=t(52663),N=t(66856),O=t(29525),T=t(7212),A=t(66083),E=(0,m.Z)((function(e){return{danger:{backgroundColor:e.palette.error.main,color:"white","&:hover":{backgroundColor:(0,p._j)(e.palette.error.main,.1)}}}}));function R(e){var n=e.title,t=e.message,r=e.confirmText,c=e.denyText,s=e.onConfirm,o=e.onDeny,i=e.open,u=e.onClose,d=E(),h=(0,a.useCallback)((function(){u(),s&&s()}),[u,s]),f=(0,a.useCallback)((function(){u(),o&&o()}),[u,o]);return(0,l.jsx)("div",{children:(0,l.jsxs)(P.Z,{open:i,onClose:u,children:[(0,l.jsx)(A.Z,{children:n}),(0,l.jsx)(O.Z,{children:(0,l.jsx)(T.Z,{children:t})}),(0,l.jsxs)(N.Z,{children:[(0,l.jsx)(Z.Z,{onClick:f,children:c}),(0,l.jsx)(Z.Z,{className:d.danger,onClick:h,variant:"contained",autoFocus:!0,children:r})]})]})})}R.defaultProps={open:!1,denyText:"Cancel"};var z=R,F=t(88867),H=(0,m.Z)((function(e){return{checkCell:{padding:0,width:30},danger:{backgroundColor:e.palette.error.main,color:"white","&:hover":{backgroundColor:(0,p._j)(e.palette.error.main,.1)}}}}));function L(e){var n,t,o=e.title,m=e.records,p=e.refresh,S=e.apiPath,P=e.label,N=e.createLabel,O=e.newHref,T=e.newAs,A=e.columns,E=e.row,R=e.actions,L=e.style,I=H(),M=(0,a.useState)({confirmDestroySelectedOpen:!1,confirmDestroyOpen:!1}),B=M[0],U=M[1],X=(0,a.useContext)(F.Z),J=X.refresh,W=X.session,q=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(0,a.useState)((function(){return new Set(n)})),r=t[0],c=t[1],s=(0,a.useCallback)((function(n){n.target.checked?c(new Set(e)):c(new Set([]))}),[e]),o=(0,a.useCallback)((function(n){n.target.checked?c(new Set((0,D.Z)(r).concat([e[n.target.value]]))):(r.delete(e[n.target.value]),c(new Set(r)))}),[e,r]),i=(0,a.useMemo)((function(){return e.length===r.size}),[r]),l=(0,a.useCallback)((function(){c(new Set)}),[]);return{toggleAll:s,selection:r,setSelection:c,toggle:o,allSelected:i,clearSelection:l}}(m),G=q.selection,K=q.toggle,Q=q.toggleAll,V=q.allSelected,Y=q.clearSelection,$=(0,a.useCallback)((function(){U((function(e){return(0,s.Z)((0,c.Z)({},e),{confirmDestroySelectedOpen:!0})}))}),[G]),ee=(0,a.useCallback)((0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(G).map((function(e){return e.id})),toast("".concat(P.charAt(0).toUpperCase()+P.slice(1)).concat(1!==n.length?"s":""," deleted.")),e.next=4,fetch("/rest/".concat(S,"/destroy_selected"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:n})});case 4:return e.next=6,p();case 6:J(),Y();case 8:case"end":return e.stop()}}),e)}))),[G,P]),ne=(0,a.useCallback)((function(e){U({confirmDestroyOpen:!0,destroyRecord:e})}),[]),te=(0,a.useCallback)((0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return toast("".concat(P," ").concat(B.destroyRecord.name," deleted")),e.next=3,fetch("/rest/".concat(S,"/").concat(B.destroyRecord.id),{method:"DELETE"});case 3:p(),J(),U((function(e){return(0,s.Z)((0,c.Z)({},e),{destroyRecord:null})}));case 6:case"end":return e.stop()}}),e)}))),[B]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(z,{open:B.confirmDestroyOpen,onClose:function(){return U((function(e){return(0,s.Z)((0,c.Z)({},e),{confirmDestroyOpen:!1})}))},title:"Delete ".concat(P),message:'Are your sure your want to delete "'.concat(null===(n=B.destroyRecord)||void 0===n?void 0:n.name,'"?'),onConfirm:te,confirmText:'Delete "'.concat(null===(t=B.destroyRecord)||void 0===t?void 0:t.name,'"')}),(0,l.jsx)(z,{open:B.confirmDestroySelectedOpen,onClose:function(){return U((function(e){return(0,s.Z)((0,c.Z)({},e),{confirmDestroySelectedOpen:!1})}))},title:"Delete Selected",message:"Are your sure your want to delete the ".concat(G.size," selected ").concat(P,"(s)?"),onConfirm:ee,confirmText:"Delete Selected"}),(null!=N||null==W.user)&&(0,l.jsxs)(j.Z,{item:!0,xs:12,style:{display:"flex"},children:[W.user&&N&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b(),{href:O,as:T,passHref:!0,children:(0,l.jsx)(Z.Z,{variant:"contained",color:"primary",children:N})}),(0,l.jsx)(_.Z,{spacing:1}),R&&R.map((function(e,n){return(0,l.jsxs)("div",{style:{display:"flex"},children:[e,(0,l.jsx)(_.Z,{spacing:1})]},n)}))]}),!W.user&&(0,l.jsx)(b(),{href:"/sign-up?afterSignIn=".concat(encodeURIComponent(T)),passHref:!0,children:(0,l.jsxs)(Z.Z,{variant:"contained",color:"primary",children:["Sign up for a free account to ",N]})})]}),0===m.length?null:(0,l.jsxs)(j.Z,{item:!0,xs:12,style:L,children:[o&&(0,l.jsx)(y.Z,{variant:"h2",gutterBottom:!0,children:o}),(0,l.jsxs)(u.Z,{size:"small",children:[(0,l.jsx)(f.Z,{children:(0,l.jsxs)(x.Z,{children:[(0,l.jsx)(h.Z,{className:I.checkCell,children:(0,l.jsx)(g.ZP,{title:"Select all Records",children:(0,l.jsx)(v.Z,{onChange:Q,checked:V})})}),A.map((function(e){return(0,l.jsx)(h.Z,{children:e},e)})),(0,l.jsx)(h.Z,{style:{whiteSpace:"nowrap"},children:(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:0===m.length?null:(0,l.jsx)(g.ZP,{title:"Delete Selected",children:(0,l.jsx)(C.Z,{disabled:0===G.size,onClick:$,children:(0,l.jsx)(w.Z,{})})})})})]})}),(0,l.jsx)(d.Z,{children:m.map((function(e,n){return(0,l.jsxs)(x.Z,{children:[(0,l.jsx)(h.Z,{className:I.checkCell,children:(0,l.jsx)(v.Z,{checked:G.has(e),onChange:K,value:n})}),E(e),(0,l.jsx)(h.Z,{children:(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,l.jsx)(g.ZP,{title:"Delete ".concat(e.name),children:(0,l.jsx)(C.Z,{onClick:function(){return ne(e)},children:(0,l.jsx)(k.Z,{})})})})})]},e.id)}))})]})]})]})}}},function(e){e.O(0,[1151,6367,1816,9774,2888,179],(function(){return n=43489,e(e.s=n);var n}));var n=e.O();_N_E=n}]);